<!-- BEGIN Gestion_redirectionsIndex -->
$TemplateCommunHeader
<!-- DEBUT CONTENT -->
	<!-- DEBUT PAGE HEADER-->
		<div class="row">
			<div class="col-md-12">
				<!-- DEBUT PAGE TITLE & BREADCRUMB-->
					<h3 class="page-title">
						$multilangue[gestion_redirections]<small></small>
					</h3>
					<ul class="page-breadcrumb breadcrumb">						
						<li>
							<i class="fa fa-home"></i>
							<a href="index.php">
								$multilangue[accueil]
							</a>
							<i class="fa fa-angle-right"></i>
						</li>
						<li>							
							$multilangue[utilisation_avancee]	
							<i class="fa fa-angle-right"></i>						    	                       
						</li>
					    <li>
					        $multilangue[gestion_redirections]					        
					    </li>
					</ul>
				<!-- FIN PAGE TITLE & BREADCRUMB-->
			</div>
		</div>
	<!-- FIN PAGE HEADER-->
	
	<!-- DEBUT PAGE CONTENT -->	
		<!-- BEGIN Gestion_redirectionsErreur -->
			<div class="alert alert-danger alert-dismissable">
				<button aria-hidden="true" data-dismiss="alert" class="close" type="button"></button>
				$texteErreur
			</div>
		<!-- END Gestion_redirectionsErreur -->
		<!-- BEGIN Gestion_redirectionsListe -->
			<div class="portlet box light-grey">
				<div class="portlet-title">
					<div class="caption">
						$multilangue[ajt_redirection]
					</div>																		
				</div>
				<div class="portlet-body form">
					<div class="form-body">	
						<form action="gestion_redirections.php?action=ajout" method="post">
							<div class="form-group">
								<div class="col-md-4 ta-right">
									<label class="control-label" style="line-height:27px;"><b>$multilangue[ancienne_url] :</b></label>
								</div>
								<div class="col-md-8">
									<table style="width:70%;">
										<tbody>
											<tr>
												<td valign="middle" align="right"><label class="control-label">http://$host/</label></td>
												<td valign="middle" align="left" style="width:70%;">
													<input type="text" name="ancienneURL" class="form-control" value="$old_url">
												</td>
											</tr>
										</tbody>
									</table>					
								</div>
							</div>
							<div class="clear"></div><br>
							<div class="form-group">
								<div class="col-md-4 ta-right">
									<label class="control-label" style="line-height:27px;"><b>$multilangue[nouvelle_url] :</b></label>
								</div>
								<div class="col-md-8">
									<table style="width:70%;">
										<tbody>
											<tr>
												<td valign="middle" align="right"><label class="control-label">http://$host/</label></td>
												<td valign="middle" align="left" style="width:70%;">
													<input type="text" name="nouvelleURL" class="form-control">
												</td>
											</tr>
										</tbody>
									</table>					
								</div>
							</div>
							<div class="clear"></div><br>
							<div class="form-group">
								 <div class="col-md-4 ta-right">
									<label class="control-label" style="line-height:27px;"><b>$multilangue[type] :</b></label>
								</div>
								<div class="col-md-1">
									<select name="type" class="form-control">
										<option value="301">301</option>
										<option value="302">302</option>
									</select>
								</div>
							</div><div class="clear"></div><br>
							<div class="col-md-12 ta-center">
								<button type="submit" class="btn green">$multilangue[ajouter]</button>
							</div>
							<div class="clear"></div><br>
						</form>
					</div>
				</div>
			</div>
			
			<!-- BEGIN Gestion_redirectionsModalSupprMultiple -->
				<div aria-hidden="false" aria-labelledby="myModalSupprMultiple" role="dialog" tabindex="-1" class="modal fade in" id="myModalSupprMultiple" style="display: block;">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button aria-hidden="true" data-dismiss="modal" class="close btn_cache_modal" type="button"></button>
								<h4 class="modal-title ta-center">$multilangue[suppr_redirections]</h4>
							</div>
							<div class="modal-body">
								<div class="ta-center">$multilangue[suppression_redirections]</div><br>
								<!-- BEGIN Gestion_redirectionsModalSupprInfos -->
									http://$host$url[old_url] <b>$multilangue[vers]</b> http://$host$url[new_url] <br>
								<!-- END Gestion_redirectionsModalSupprInfos -->
							</div>
							<div class="modal-footer">
								<button aria-hidden="true" data-dismiss="modal" class="btn default btn_cache_modal" >Non</button>
								<a href="gestion_redirections.php?action=doSupprMultiple&id=$ids" class="btn blue">$multilangue[supprimer]</a>
							</div>
						</div>
					</div>
				</div>
			<!-- END Gestion_redirectionsModalSupprMultiple -->
			
			<form action="gestion_redirections.php?action=supprMultiple" method="post">
				<div class="table-responsive">
					<div class="table-actions-wrapper right mb-10">
						<span id="nb_rows_selected">0</span><span> $multilangue[ligne_s_slectionnee_s]</span>
						<button class="btn red table-group-action-submit"><i class="fa  fa-trash-o "></i> $multilangue[supprimer]</button>
					</div>
					<div class="clear"></div>
					<table class="table table-striped table-bordered table-redirections">
						<thead>
							<tr>
								<td><input type="checkbox" id="tout_cocher"></td>
								<td>$multilangue[ancienne_url]</td>
								<td>$multilangue[nouvelle_url]</td>
								<td>$multilangue[type]</td>
								<td>$multilangue[actions]</td>
							</tr>
						</thead>
						<tbody>				
						</tbody>
					</table>
				</div>
			</form>
		<!-- END Gestion_redirectionsListe -->
	<!-- FIN PAGE CONTENT-->
<!-- FIN CONTENT -->	
$TemplateCommunFooter

<script type="text/javascript">
	App.init(); // initlayout and core plugins
	function ligneSelect(){
		$('#nb_rows_selected').text($(".chk:checked").length);	
	}
	$(document).ready(function() {
		$('.table-redirections').dataTable( {
			"aoColumns": [
				{"sClass": "ta-center", "bSortable": false, "mData": "checkbox", "iDataSort": 0, "data": "checkbox", "bVisible": true},    
				{"sClass": "ta-center", "bSortable": true, "mData": "ancienne", "iDataSort": 1, "data": "ancienne", "bVisible": true},           
	            {"sClass": "ta-center", "bSortable": true, "mData": "nouvelle", "iDataSort": 2, "data": "nouvelle", "bVisible": true},
				{"sClass": "ta-center", "bSortable": true, "mData": "type", "iDataSort": 3, "data": "type", "bVisible": true},
				{"sClass": "ta-center", "bSortable": false, "mData": "actions", "iDataSort": 4, "data": "actions", "bVisible": true}
   		    ],
       		"iDisplayStart": 0,
          	"iDisplayLength": 10,
          	"fnDrawCallback": function() {
				App.initAjax();
         	 },
         	"bSortCellsTop": true,
         	"bFilter": true,
			"processing": true,
			"serverSide": true,
			"ajax": {
	           "url": "gestion_redirections_ajax.php",
	           "type": "POST",
	           "data": function ( d ) {
	           }
	        },       
			"order": [[ 1, "desc" ]],
			"aLengthMenu": [[10, 20, 40, 60, -1], [10, 20, 40, 60, "$multilangue[tous_les]"]],
			"language": {
				"search": "$multilangue[recherche] : ",
				"paginate": {
					"first": "$multilangue[premiere_page]",
					"last": "$multilangue[derniere_page]",
					"next": "$multilangue[page_suivante]",
					"previous": "$multilangue[page_precedente]"
				},
				"emptyTable": "$multilangue[aucune_donnee_dispo_table]",
				"info": "$multilangue[affichage_resultats_de_a]",
				"infoEmpty": "$multilangue[aucun_resultat]",
				"infoFiltered": "$multilangue[sur_max_]",
				"lengthMenu": "$multilangue[afficher_menu_resultats]",
				"sLoadingRecords": "$multilangue[chargement]",
				"sProcessing": '<img src="assets/img/loading-spinner-grey.gif"/><span>&nbsp;&nbsp;$multilangue[chargement] ...</span>',
				"sZeroRecords": "$multilangue[aucun_resultat_trouve]"
			}
         
		});

		$('.dataTables_filter input').addClass("form-control input-small input-inline");
		$('.dataTables_length select').addClass("form-control input-small");
		
		$('#tout_cocher').click(function(){
			var checkboxes = $('.table-redirections').find(':checkbox');
			if($(this).attr('checked')){
				checkboxes.attr('checked', true);
				$('.table-redirections .checker span').attr("class","checked");
			}else{
				checkboxes.attr('checked', false);
				$('.table-redirections .checker span').attr("class","");
			}
			ligneSelect();
		});
		
		$('.btn_cache_modal').on('click', function(){
			$('#myModalSupprMultiple').hide();
		});
	});
</script>
<!-- END Gestion_redirectionsIndex -->