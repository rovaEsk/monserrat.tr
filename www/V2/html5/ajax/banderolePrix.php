<?phpsession_start();if ( 'POST' == $_SERVER['REQUEST_METHOD'] ) {	if ( isset( $_SERVER['HTTP_ORIGIN'] ) ) {		$address = 'http://' . $_SERVER['SERVER_NAME'];		if ( strpos( $address, $_SERVER['HTTP_ORIGIN'] ) !== 0 ) {			exit( 'CSRF protection in POST request: detected invalid Origin header: ' . $_SERVER['HTTP_ORIGIN'] );		}	}}$productID = $_SESSION['prodID'];if ( !isset( $productID ) )	die();//-----------------------------------require_once("../../global.php");//------------------------------------   if (isset($_POST['bLong'])) {   $longueur = $_POST['bLong'];} else if(isset($_GET['bLong'])) {   $longueur = $_GET['bLong'];}if (isset($_POST['bHaut'])) {   $hauteur = $_POST['bHaut'];} else if(isset($_GET['bHaut'])) {   $hauteur = $_GET['bHaut'];}if (isset($_POST['moduleId'])) {   $moduleId = $_POST['moduleId'];} else if(isset($_GET['moduleId'])) {   $moduleId = $_GET['moduleId'];}$modulePrixData = $DB_site->query("SELECT pm.prixmodule as prix_module, pm.regleprix as regle_prix, pm.largeur AS largeur, pm.hauteur AS hauteur            FROM prixarticlemodule pm            JOIN articlemodule_prix ap ON (pm.prixmoduleid = ap.prixmoduleid)            JOIN articlemodule am ON (am.articlemoduleid = ap.articlemoduleid)            WHERE am.articlemoduleid = 1");$prix = 0.00;while( $modulePrix = $DB_site->fetch_array($modulePrixData)){               $largeur_min = $modulePrix[largeur];    $largeur_max = $modulePrix[hauteur];    if($longueur >= $modulePrix[largeur] && $longueur <= $modulePrix[hauteur] ){        $prix = $modulePrix[prix_module];    }               }$tarif = $prix;$surface = $longueur * $hauteur;//$tarif = $surface * 0.0040;$data = array(	'productID'	=> $productID,	'longueur' 	=> $longueur,	'hauteur'	=> $hauteur,	'surface'	=> $surface,	'prixHT'	=> $tarif);$_SESSION['rapidpub'][$productID]['info'] = $data;echo json_encode( $data ); 